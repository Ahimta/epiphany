2003-10-14  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/ephy-download.c: (ephy_download_get_source),
	(ephy_download_get_target), (ephy_download_get_percent):
	* embed/ephy-download.h:
	* embed/mozilla/mozilla-download.cpp:

	Implement basic download info getters.

2003-10-14  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/Makefile.am:
	* embed/downloader-view.c: (destroy_details_cb),
	(downloader_view_update_controls),
	(downloader_view_update_details),
	(downloader_view_set_download_info),
	(downloader_view_add_download), (downloader_view_build_ui),
	(download_dialog_pause_cb), (download_dialog_abort_cb),
	(downloader_treeview_selection_changed_cb),
	(download_dialog_delete_cb), (open_selection_foreach),
	(download_dialog_open_cb):
	* embed/downloader-view.h:
	* embed/ephy-download.c: (ephy_download_get_type),
	(ephy_download_class_init), (ephy_download_init),
	(ephy_download_new), (ephy_download_cancel), (ephy_download_pause),
	(ephy_download_resume):
	* embed/ephy-download.h:
	* embed/ephy-embed-shell.c: (impl_get_downloader_view):
	* embed/mozilla/EphyDownload.cpp:
	* embed/mozilla/EphyDownload.h:
	* embed/mozilla/EphyHeaderSniffer.cpp:
	* embed/mozilla/Makefile.am:
	* embed/mozilla/MozDownload.cpp:
	* embed/mozilla/MozDownload.h:
	* embed/mozilla/MozRegisterComponents.cpp:
	* embed/mozilla/mozilla-download.cpp:
	* embed/mozilla/mozilla-download.h:
	* embed/mozilla/mozilla-embed-persist.cpp:
	* lib/Makefile.am:
	* lib/widgets/Makefile.am:
	* src/Makefile.am:
	* src/bookmarks/Makefile.am:

	Big architectural changes. Now I think it make sense,
	but we need to rewrite a lot of ui code.

2003-10-14  Xan Lopez  <xan@masilla.org>

	* embed/downloader-view.c: (downloader_view_class_init),
	(download_dialog_pause_cb), (delete_pending_foreach):
	* embed/mozilla/mozilla-downloader-view.cpp:
	* embed/mozilla/mozilla-downloader-view.h:

	Some cleanups.

2003-10-14  Xan Lopez  <xan@masilla.org>

	* embed/downloader-view.c: (download_dialog_abort_cb),
	(downloader_cancel_download):
	* embed/mozilla/mozilla-downloader-view.cpp:

	Evil stuff.

2003-10-14  Xan Lopez  <xan@masilla.org>

	* embed/ephy-embed-shell.c: (impl_get_downloader_view):
	* embed/mozilla/mozilla-downloader-view.cpp:
	* embed/mozilla/mozilla-downloader-view.h:

	And More.

2003-10-13  Xan Lopez  <xan@masilla.org>

	* embed/mozilla/EphyDownload.h:

	Cleanup
	
	* embed/mozilla/Makefile.am:
	* embed/mozilla/mozilla-downloader-view.cpp:
	* embed/mozilla/mozilla-downloader-view.h:

	Yet More Work.

2003-10-13  Xan Lopez  <xan@masilla.org>

	* embed/downloader-view.c: (downloader_view_class_init),
	(download_dialog_pause_cb), (download_dialog_abort_cb),
	(delete_pending_foreach), (downloader_cancel_download),
	(downloader_pause_download), (downloader_resume_download):
	* embed/downloader-view.h:

	More work.

2003-10-07  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/mozilla/EphyHeaderSniffer.cpp:

	Fix crash when download start

2003-10-07  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/ephy-embed-persist.h:
	* embed/ephy-embed-popup-control.c: (save_property_url),
	(embed_popup_download_link_cmd), (embed_popup_save_image_as_cmd),
	(save_url), (embed_popup_save_page_as_cmd),
	(embed_popup_save_background_as_cmd):
	* embed/ephy-embed-utils.c: (ephy_embed_utils_save):
	* embed/ephy-embed-utils.h:
	* embed/mozilla/EphyDownload.cpp:
	* embed/mozilla/EphyDownload.h:
	* embed/mozilla/EphyHeaderSniffer.cpp:
	* embed/mozilla/EphyHeaderSniffer.h:
	* embed/mozilla/mozilla-embed-persist.cpp:
	* src/popup-commands.c: (save_property_url),
	(popup_cmd_download_link), (popup_cmd_save_image_as),
	(popup_cmd_save_background_as):
	* src/window-commands.c: (window_cmd_file_save_as):

	Make embed-persist use nsIDownload and cleanup api a bit.

2003-10-06  Xan Lopez  <xan@masilla.org>

	* embed/mozilla/ContentHandler.cpp:
	* embed/mozilla/EphyWrapper.cpp:
	* embed/mozilla/EphyWrapper.h:
	* embed/mozilla/EventContext.cpp:
	* embed/mozilla/GlobalHistory.h:
	* embed/mozilla/ProgressListener.cpp:
	* embed/mozilla/ProgressListener.h:
	* embed/mozilla/mozilla-embed-persist.cpp:

	Remove ProgressListener again, hopefully everything
	compiles without it now.

2003-10-06  Xan Lopez  <xan@masilla.org>

	* embed/mozilla/EphyDownload.cpp:
	* embed/mozilla/EphyDownload.h:
	* embed/mozilla/EphyHeaderSniffer.cpp:
	* embed/mozilla/EphyHeaderSniffer.h:
	* embed/mozilla/MozRegisterComponents.cpp:
	* embed/mozilla/ProgressListener.cpp:
	* embed/mozilla/ProgressListener.h:
	* embed/mozilla/mozilla-embed-persist.cpp:

	Cleanups.

2003-10-06  Xan Lopez  <xan@masilla.org>

	* embed/mozilla/Makefile.am:
	* embed/mozilla/MozRegisterComponents.cpp:
	* embed/mozilla/mozilla-embed-persist.cpp:

	Make it work, behold the all new EphyDownload.

2003-10-06  Christian Persch  <chpe@cvs.gnome.org>

	* src/ephy-notebook.c: (find_notebook_at_pointer),
	(ephy_notebook_init), (ephy_notebook_finalize):

	Allow dragging of tabs to a window even when the tabs bar is not
	shown. Fixes bug #123908.

2003-10-06  Marco Pesenti Gritti  <marco@gnome.org>

	* src/ephy-history-window.c: (setup_filters),
	(site_node_selected_cb), (search_entry_search_cb),
	(time_optionmenu_changed_cb):
	
	More granular filtering update

2003-10-06  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/ephy-history.c: (update_host_on_child_remove),
	(update_hosts), (page_removed_from_host_cb), (ephy_history_init),
	(ephy_history_finalize):

	Update host last visit when removing sites from it.

2003-10-06  Marco Pesenti Gritti  <marco@gnome.org>

	* src/ephy-history-window.c: (search_entry_search_cb):
	
	update priv->select_node, signals are blocked so it would
	not be updated otherwise

2003-10-06  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/widgets/ephy-node-view.c: (did_not_drag):

	Do not unselect all on single selection mode, to not generate
	useless node selection changes.

	* src/ephy-history-window.c: (site_node_selected_cb):

	Do not refilter if the new selected node is the same
	as the old one.

2003-10-03  Christian Persch  <chpe@cvs.gnome.org>

	* lib/egg/egg-toolbars-model.c: (safe_save_xml),
	(egg_toolbars_model_load):

	Check for failed load of the toolbars model from the XML file,
	and fix the check for failed save of same to the XML file.

2003-10-02  Marco Pesenti Gritti  <marco@gnome.org>

	* src/bookmarks/ephy-bookmarks-menu.c: (add_bookmarks_menu),
	(ephy_bookmarks_menu_rebuild):

	Use new gtk api for empty submenus

2003-09-30  Marco Pesenti Gritti  <marco@gnome.org>

	* data/epiphany.schemas.in:
	* data/ui/epiphany-history-window-ui.xml:
	* src/ephy-history-window.c: (set_columns_visibility),
	(cmd_view_columns), (get_details_value),
	(ephy_history_window_construct):

	Implement view menu.

2003-09-30  Christian Persch  <chpe@cvs.gnome.org>

	* src/ephy-history-window.c: (build_search_box):

	Use ngettext.

2003-09-30  Christian Persch  <chpe@cvs.gnome.org>

	* embed/print-dialog.c: (print_get_info):

	Don't pass NULL to gnome_vfs_expand_initial_tilde.

2003-09-30  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/ephy-history.c:
	* src/ephy-history-window.c: (build_search_box):

	More accurate description for Ever filter.
	Keep the backend as is, so we dont have to change
	it if we change history expire.

2003-09-29  Marco Pesenti Gritti  <marco@gnome.org>

	* data/default-prefs.js:

	Add defaults in points for fonts

2003-09-28  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/mozilla/mozilla-embed-single.cpp:

	The file picker dir can be NULL, check before
	trying to expand tilde.

	* src/bookmarks/ephy-bookmarks-editor.c:
	(import_dialog_response_cb), (cmd_bookmarks_import):

	Implement import from a file

2003-09-27  Xan Lopez  <xan@masilla.org>

	* configure.in:

	Forgot this.

2003-09-27  Xan Lopez  <xan@masilla.org>

	* configure.in:
	* embed/mozilla/ContentHandler.cpp:

	API sync, from galeon.

2003-09-27  Christian Persch  <chpe@cvs.gnome.org>

	* src/bookmarks/ephy-bookmarks-editor.c: (cmd_bookmarks_import):
	* src/bookmarks/ephy-bookmarks-import.h:

	Offer to import from Firebird too.

2003-09-27  Marco Pesenti Gritti  <marco@gnome.org>

	* lib/ephy-gui.c: (ephy_gui_get_pixbuf_from_mime_type):

	Simpler implementation.

	* lib/widgets/ephy-spinner.c: (ephy_spinner_load_images):
	* src/ephy-shell.c: (ephy_shell_init):

	Pass 0 as flags

2003-09-27  Marco Pesenti Gritti  <marco@gnome.org>

	* embed/mozilla/ContentHandler.cpp:
	* lib/ephy-gui.c: (make_mime_name),
	(ephy_gui_get_pixbuf_from_mime_type):
	* lib/ephy-gui.h:
	* lib/widgets/ephy-spinner.c: (ephy_spinner_init),
	(ephy_spinner_theme_changed), (ephy_spinner_load_images),
	(ephy_spinner_finalize):
	* src/ephy-shell.c: (ephy_shell_init):

	Use gtkicontheme, and use it also for mime icons.

2003-09-26  Marco Pesenti Gritti  <marco@gnome.org>

	* data/epiphany.schemas.in:
	* lib/ephy-node-filter.c: (ephy_node_filter_evaluate):
	* src/ephy-history-window.c: (ephy_history_window_finalize),
	(add_by_site_filter), (add_by_date_filter), (add_by_word_filter),
	(setup_filters), (site_node_selected_cb), (search_entry_search_cb),
	(time_optionmenu_changed_cb), (build_search_box),
	(ephy_history_window_construct), (save_date_filter),
	(ephy_history_window_dispose):

	Implement history time filter

2003-09-26  Marco Pesenti Gritti  <marco@gnome.org>

	* src/ephy-window.c:

	Remove unused includes, they was causing warnings on solaris

